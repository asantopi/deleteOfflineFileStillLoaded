## [Offline Publish with Catalog Client interrupted or in error]

During the "OFFLINE" publish phase of the Products catalog using the Catalog Client could be issues and leave the publish halfway.
We are therefore in an unstable condition that can be resolved in two ways:
1) We redo the offline publish of all products
2) We delete the files already published on the Database and re-publish only those not yet processed.

Since the publish is very slow and we have about 50,000 products to process, choice number 2 is mandatory.

During the publish phase, the Catalog Client that takes care of publishing the products over HTTP on a Catalog Service endpoint (We have 2 catalog service one for OM and one for OPE) and generates a log file, which contains the list of the files processed and the state of publish: SUCCESS or Exception

Using the scripts we can delete all files processed correctly and resubmit to publish only for those were in exception or not processed due to the interruption of the execution of the Catalog Client. 


Usage

Grub the catalog-client.log, for example:

- catalog-client.log
- catalog-client_2021-11-26.0.log
- catalog-client_2021-11-26.1.log

execute the "extractFileName.sh" on each log file generated by the Catalog Client during the publish:
```
./extractFileName.sh catalog-client.log
./extractFileName.sh catalog-client_2021-11-26.0.log
./extractFileName.sh catalog-client_2021-11-26.1.log
```

A file containing all the XML file names that can be deleted will be generated in the same folder where you executed the script ---> eg: 2021-12-09_122844_list_of_file_to_delete.txt
At this point it is possible to run the delete script to remove the files correctly processed in the previously publish.
Then execute the command to delete file still processed:

```
./deleteFileNameFromList.sh 2021-12-09_122844_list_of_file_to_delete.txt pathToFolderOFXmlFileToDelete/
```
Now you can run again the Offline Publish using the Catalog Client.
